    <div class="sheet-znz-character-sheet">

        <!--- Name and Stats --->
        <div class="sheet-znz-area">
            <div class="sheet-znz-section sheet-znz-section-name">
                <div class="sheet-znz-block sheet-znz-block-name">
                    <label>Name:</label>
                    <input type="text" name="attr_name"></input>
                </div>
                <div class="sheet-znz-block sheet-znz-block-status">
                    <label>Status:</label>
                    <input type="text" name="attr_status"></input>
                </div>
            </div>

            <div class="sheet-znz-section sheet-znz-section-status">
                <div class="sheet-znz-block sheet-znz-block-health">
                    <label>Health</label>
                    <div class="sheet-znz-stat-container">
                        <input type="number" name="attr_hp" /> <span class="sheet-divider">/</span>
                        <input type="number" class="sheet-znz-attr-bonus" readonly name="attr_hp_max" value="15"/>
                    </div>
                </div>
                <div class="sheet-znz-block sheet-znz-block-sanity">
                    <label>Sanity</label>
                    <div class="sheet-znz-stat-container">
                        <input type="number" name="attr_sanity" /> <span class="sheet-divider">/</span>
                        <input type="number" class="sheet-znz-attr-bonus" readonly name="attr_sanity_max" value="15"/>
                    </div>
                </div>
                <div class="sheet-znz-block sheet-znz-block-energy">
                    <label>Energy</label>
                    <div class="sheet-znz-stat-container">
                        <input type="number" name="attr_energy" /> <span class="sheet-divider">/</span>
                        <input type="number" class="sheet-znz-attr-bonus" readonly name="attr_energy_max" value="30"/>
                    </div>
                </div>
            </div>
        </div>

        <!--- Attributes and Equipment --->
        <div class="sheet-znz-area">

            <div class="sheet-znz-section sheet-znz-section-attributes">
                <table>
                    <tr>
                        <th>
                            Attribute
                        </th>
                        <th>
                            Score
                        </th>
                        <th>
                            Bonus
                        </th>
                    </tr>
                    <tr>
                        <td>
                            <label>Intelligence</label>
                            <div class="sheet-attrib-description">
                                Knowledge, Understanding, Crafting,
                            </div>
                        </td>
                        <td><input type="number" name="attr_intelligence" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_intelligence_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Strength</label>
                            <div class="sheet-attrib-description">
                                Strength Checks, Melee Damage, Grappling
                            </div>
                        </td>
                        <td><input type="number" name="attr_strength" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_strength_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Dexterity</label>
                            <div class="sheet-attrib-description">
                                Speed, Initiative, Dodging
                            </div>
                        </td>
                        <td><input type="number" name="attr_dexterity" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_dexterity_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Empathy</label>
                            <div class="sheet-attrib-description">
                                Interpersonal Skills, Charisma, Insight
                            </div>
                        </td>
                        <td><input type="number" name="attr_empathy" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_empathy_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Awareness</label>
                            <div class="sheet-attrib-description">
                                Perception, Scouting, Stealth
                            </div>
                        </td>
                        <td><input type="number" name="attr_awareness" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_awareness_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Tenacity</label>
                            <div class="sheet-attrib-description">
                                Determines Max Stress. Mental Fortitude. Pain resistance
                            </div>
                        </td>
                        <td><input type="number" name="attr_tenacity" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_tenacity_bonus" value="0"/></td>
                    </tr>
                    <tr>
                        <td>
                            <label>Health</label>
                            <div class="sheet-attrib-description">
                                Determines Max HP and Energy. Sickness resistance
                            </div></td>
                        <td><input type="number" name="attr_health" min="0" value="3" max="6"/></td>
                        <td><input type="text" class="sheet-znz-attr-bonus" readonly name="attr_health_bonus" value="0"/></td>
                    </tr>
                </table>
            </div>


            <div class="sheet-znz-subarea sheet-znz-equipment">
                <!--- Equipped Weapons-->
                <div class="sheet-znz-section-equipped-weapons">
                    <div class="sheet-znz-block-equipped">
                        <div class="sheet-znz-block-ranged">
                            <label>Equipped Ranged</label>
                            <div class="sheet-znz-weapon-stats sheet-znz-ranged-stats">
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Name:</label> 
                                    <input type="number" name="attr_equipped_ranged_name"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Additional Shots Bonus:</label> 
                                    <input type="number" name="attr_equipped_ranged_bonus"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Ammo:</label> 
                                    <input type="number" name="attr_equipped_ranged_ammo"/>  <span class="sheet-divider">/</span>  <input type="number" name="attr_equipped_ranged_ammo_max"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Reloads:</label> 
                                    <input type="number" name="attr_equipped_ranged_reloads"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Notes</label> 
                                    <textarea name="attr_equipped_ranged_notes" rows="2"></textarea>
                                </div>
                            </div>
                        </div>
    
                        <div class="sheet-znz-block-melee">
                            <label>Equipped Melee</label>
                            <div class="sheet-znz-weapon-stats sheet-znz-melee-stats">
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Name:</label> 
                                    <input type="number" name="attr_equipped_melee_name"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Additional Energy Bonus:</label> 
                                    <input type="number" name="attr_equipped_melee_bonus"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Energy Cost:</label> 
                                    <input type="number" name="attr_equipped_melee_cost"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Durability:</label> 
                                    <input type="number" name="attr_equipped_melee_durability"/><span class="sheet-divider">/</span><input type="number" name="attr_equipped_melee_durability_max"/>
                                </div>
                                <div class="sheet-znz-weapon-stat-row">
                                    <label>Notes</label> 
                                    <textarea name="attr_equipped_melee_notes" rows="2"></textarea>
                                </div>
                            </div>
    
                        </div>
                    </div>
                </div>


                <!--- Other Equipment -->
                <div class="sheet-znz-section-other-equipment">
                    <label>Other Equipment</label>
                    <div class="sheet-znz-field-other-equipment">
                        <fieldset class="repeating_other_equipment">
                            <div class="sheet-znz-field-other-equipment">
                                <div class="sheet-znz-field-weapon-name">
                                    Name:
                                    <input type="text" name="attr_other_equipment_name"/>
                                </div>
                                <div class="sheet-znz-field-equipment-description">
                                    Details:
                                    <textarea name="attr_other_equipment_details" ></textarea>
                                </div>
                            </div>
                        </fieldset>
                    </div>
                </div>


            </div>

        </div>
    

        <!--- Skills and Abilities-->
        <div class="sheet-znz-area">
            <div class="sheet-znz-section-skills">
                <label>Skills</label>
                <fieldset class="repeating_skills">
                    <div class="sheet-znz-block-skill">
                        <div class="sheet-znz-field-skill-select">
                            <label>Select Skill</label>
                            <select name="attr_skill_type">
                                <option value="firearms">Firearms</option>
                                <option value="unarmed">Unarmed Combat</option>
                                <option value="melee">Melee Combat</option>
                                <option value="stealth">Stealth</option>
                                <option value="archery">Archery</option>
                                <option value="throwing">Throwing weapons</option>
                                <option value="scavenging">Scavenging</option>
                                <option value="lockpicking">Lockpicking</option>
                                <option value="electronics">Electronics</option>
                                <option value="driving">Driving</option>
                                <option value="piloting">Piloting</option>
                                <option value="crafting">Crafting</option>
                                <option value="repair">Repair</option>
                                <option value="cooking">Cooking</option>
                                <option value="medicine">Medicine</option>
                                <option value="science">Science</option>
                                <option value="engineering">Engineering</option>
                                <option value="survival">Survival</option>
                                <option value="intimidation">Intimidation</option>
                                <option value="leadership">Leadership</option>
                                <option value="animal">Animal Handling</option>
                                <option value="persuasion">Persuasion</option>
                                <option value="athletics">Athletics</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="sheet-znz-field-skill-custom">
                            <label>Skill Name</label>
                            <div class="sheet-znz-skill-bonus-input"><input class="sheet-znz-custom-skill" type="text" name="attr_skill_custom_name"/></div>
                        </div>
                        <div class="sheet-znz-field-skill-bonus">
                            <label>Bonus</label>
                            <div class="sheet-znz-skill-bonus-input"><input type="number" name="attr_skill_bonus"/></div>
                        </div>
                    </div>
                </fieldset>

            </div>

            <div class="sheet-znz-section-abilities">
                <label>Abilities</label>
                <fieldset class="repeating_abilities">
                    <div class="sheet-znz-block-ability">
                        <div class="sheet-znz-field-ability-type">
                            <select name="attr_ability_type">
                                <option value="hawkeye">Hawkeye</option>
                                <option value="fighter">Fighter</option>
                                <option value="brawler">Brawler</option>
                                <option value="sniper">Sniper</option>
                                <option value="lucky">Lucky</option>
                                <option value="stable">Stable</option>
                                <option value="martialartist">Martial Artist</option>
                                <option value="wrestler">Wrestler</option>
                            </select>
                        </div>
                        <div class="sheet-znz-field-ability-descript">
                            <div class="sheet-znz-field-label">Description:</div>
                            <textarea type="text" name="attr_ability_description"></textarea>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="sheet-znz-area">
            <div class="sheet-znz-section-ranged-inventory">
                <label>Ranged Weapons in Inventory</label>
                <fieldset class="repeating_ranged_inventory">
                    <div class="sheet-znz-field-weapon-name">
                        Name:
                        <input type="text" name="attr_inventory_ranged_name"/>
                    </div>
                    <div class="sheet-znz-field-weapon-bonus">
                        <label>Additional Shots Bonus:</label> 
                        <input type="number" name="attr_inventory_ranged_bonus"/>
                    </div>
                    <div class="sheet-znz-field-weapon-ammo">
                        Ammo:
                        <input type="number" name="attr_inventory_ranged_ammo"/>  <span class="sheet-divider">/</span>  <input type="number" name="attr_inventory_ranged_ammo_max"/>
                    </div>
                    <div class="sheet-znz-field-weapon-reload">
                        Reloads:
                        <input type="text" name="attr_inventory_ranged_reloads"/>
                    </div>
                    <div class="sheet-znz-field-weapon-weight">
                        Weight:
                        <input type="text" name="attr_inventory_ranged_weight"/>
                    </div>
                    <div class="sheet-znz-field-weapon-note">
                        <label>Notes</label> 
                        <textarea name="attr_inventory_ranged_note" ></textarea>
                    </div>
                    <div class="sheet-znz-weapon-equip-button">
                        <button name="act_equip_inventory_ranged_weapon">Equip</button>
                    </div>
                </fieldset>
            </div>
            <div class="sheet-znz-section-melee-inventory">
                <label>Melee Weapons in Inventory</label>
                <fieldset class="repeating_ranged_inventory">
                    <div class="sheet-znz-field-weapon-name">
                        Name:
                        <input type="text" name="attr_inventory_melee_name"/>
                    </div>
                    <div class="sheet-znz-field-weapon-bonus">
                        <label>Additional Energy Bonus:</label> 
                        <input type="number" name="attr_inventory_melee_bonus"/>
                    </div>
                    <div class="sheet-znz-field-weapon-reload">
                        Energy Cost:
                        <input type="text" name="attr_inventory_melee_energy_cost"/>
                    </div>
                    <div class="sheet-znz-field-weapon-ammo">
                        Durability:
                        <input type="number" name="attr_inventory_melee_durability"/>  
                        <span class="sheet-divider">/</span>  
                        <input type="number" name="attr_inventory_melee_durability_max"/>
                    </div>
                    <div class="sheet-znz-field-weapon-weight">
                        Weight:
                        <input type="text" name="attr_inventory_melee_weight"/>
                    </div>
                    <div class="sheet-znz-field-weapon-note">
                        <label>Notes</label> 
                        <textarea name="attr_inventory_melee_note" ></textarea>
                    </div>
                    <div class="sheet-znz-weapon-equip-button">
                        <button name="act_equip_inventory_melee_weapon">Equip</button>
                    </div>
                </fieldset>
            </div>
            <div class="sheet-znz-section-misc-inventory">

            </div>
        </div>
    
            
    
        <div class="sheet-znz-block sheet-znz-block-notes">
            <label>Notes:</label>
            <textarea type="text" name="attr_notes"></textarea>
        </div>
    </div>


    <script type="text/worker">

    const stats = [
        "intelligence",
        "strength", 
        "dexterity",
        "empathy",
        "awareness",
        "tenacity",
        "health"
        ];

    stats.forEach(function (stat) {
        on("change:" + stat, function() {
            getAttrs([stat], function (values) {
                const score = parseInt(values[stat], 10) || 0;
                const mod = score - 3;

                mod > 0 ? setAttrs({ [stat + '_bonus']: "+" + mod }) : setAttrs({ [stat + '_bonus']: mod });


                if (stat == "health"){
                    const energy = score * 10;
                    const health = score * 5;
                    setAttrs({
                        ['hp_max'] : health,
                        ['energy_max'] : energy

                    });
                }

                if (stat == 'tenacity'){
                    const sanity = score * 5;

                    setAttrs({
                        ['sanity_max']:sanity   
                    });
                }

            });
        });
    });






</script>
